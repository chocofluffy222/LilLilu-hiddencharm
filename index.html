<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ãƒ”ã‚¨ãƒ­ã®ãƒªãƒ«ãƒªãƒ«ã¨ä»²é–“ãŸã¡è¨ºæ–­</title>
    
    <!-- OGPè¨­å®šï¼ˆLINEã‚·ã‚§ã‚¢ç”¨ï¼‰ -->
    <meta property="og:title" content="ãƒ”ã‚¨ãƒ­ã®ãƒªãƒ«ãƒªãƒ«ã¨ä»²é–“ãŸã¡è¨ºæ–­" />
    <meta property="og:description" content="ã‚ãªãŸã®éš ã‚ŒãŸé­…åŠ›ã¯ãªã‚“ã ï¼ï¼Ÿã‚ãªãŸã«ã´ã£ãŸã‚Šã®7ã¤ã®è³ªå•ã§è¨ºæ–­ã™ã‚‹ã‚ˆâ™¡" />
    <meta property="og:type" content="website" />
    <!-- â˜…é‡è¦ï¼šå…¬é–‹å¾Œã«ã“ã“ã® content ã‚’ã€Œhttps://.../cover.pngã€ã¨ã„ã†å®Œå…¨ãªURLã«æ›¸ãæ›ãˆã‚‹ã¨ã€LINEã§ç”»åƒãŒè¡¨ç¤ºã•ã‚Œã¾ã™ -->
    <meta property="og:image" content="https://chocofluffy222.github.io/LilLilu-hiddencharm/cover.png" />
    <meta name="twitter:card" content="summary_large_image" />
    
    <!-- React & ReactDOM (CDN) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (JSXå¤‰æ›ç”¨ CDN) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS (ãƒ‡ã‚¶ã‚¤ãƒ³ç”¨ CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@500;700;900&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            background-color: #fff9f0;
            color: #5d4037; /* æ–‡å­—è‰²ï¼šã“ã’èŒ¶ */
        }

        /* èƒŒæ™¯ï¼šæ‰‹æ›¸ãé¢¨ã®å¤§ãã‚ã®æ°´ç‰ãƒãƒƒãƒ—ï¼ˆãƒ‘ã‚¹ãƒ†ãƒ«ãƒ”ãƒ³ã‚¯ä¸€è‰²ï¼‰ */
        .bg-polka-pop {
            background-color: #fffaf0; /* ãƒ™ãƒ¼ã‚¹ï¼šã‚¯ãƒªãƒ¼ãƒ è‰² */
            background-image: 
                radial-gradient(circle, #ffe0e9 25%, transparent 26%),
                radial-gradient(circle, #ffe0e9 25%, transparent 26%);
            background-position: 0 0, 50px 50px;
            background-size: 100px 100px;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(8px);
            border-radius: 24px;
            border: 3px solid #fff;
            box-shadow: 0 8px 32px rgba(255, 182, 193, 0.25);
        }

        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .animate-float { animation: float 3s ease-in-out infinite; }

        @keyframes wand-swing {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(-15deg); }
            50% { transform: rotate(0deg); }
            75% { transform: rotate(15deg); }
            100% { transform: rotate(0deg); }
        }
        .wand-swing {
            transform-origin: 50% 80%;
            animation: wand-swing 2.5s ease-in-out infinite;
        }

        @keyframes star-twinkle {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            50% { transform: scale(1.2) rotate(180deg); opacity: 1; }
            100% { transform: scale(0) rotate(360deg); opacity: 0; }
        }
        .star-twinkle {
            transform-origin: center;
            animation: star-twinkle 2s ease-out infinite;
        }

        .btn-bounce:active { transform: scale(0.96); transition: transform 0.1s; }
        .text-pastel-pink { color: #ff8fa3; }
        .text-deep-brown { color: #5d4037; }
        
        /* ãƒ†ã‚­ã‚¹ãƒˆã®æ”¹è¡Œè¨­å®š */
        .whitespace-pre-wrap { white-space: pre-wrap; }
    </style>
</head>
<body class="bg-polka-pop">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- ãƒ‡ãƒ¼ã‚¿å®šç¾© ---
        const CHARACTERS = {
            lillilu: {
                id: 'lillilu', nameEn: 'LilLilu', nameJp: 'ãƒªãƒ«ãƒªãƒ«', 
                color: '#FFB3B3', darkColor: '#FF6B6B', // èµ¤ç³»
                title: 'ğŸ¤¡ é›¨ä¸ŠãŒã‚Šã®å¤ªé™½ã‚¿ã‚¤ãƒ—', 
                hiddenCharm: 'ç„¡é‚ªæ°—ãªæ„›ã•ã‚ŒåŠ›',
                desc: 'ã‚ãªãŸã¯ãã“ã«ã„ã‚‹ã ã‘ã§ã€\nå‘¨ã‚Šã‚’æ˜ã‚‹ãã™ã‚‹å¤ªé™½ã®ã‚ˆã†ãªå­˜åœ¨ï¼\nã¡ã‚‡ã£ã¨ã—ãŸãƒ¦ãƒ¼ãƒ¢ã‚¢ã§ã€ã¿ã‚“ãªã®\nå¿ƒã‚’ãƒ•ãƒ¯ãƒƒã¨è»½ãã—ã¦ã„ã‚‹ã‚ˆã€‚',
                advice: 'ã¾ã‚ã‚Šã®äººãŒãƒ›ãƒƒã‚³ãƒªã¨ã™ã‚‹ã‚ˆã†ãª\né›°å›²æ°—ã‚’ã‚‚ã£ã¦ã„ã‚‹ã‚ãªãŸã€‚\nå„ªã—ã„å¿ƒã§è‡ªåˆ†ã®æ°—æŒã¡ã‚ˆã‚Šã‚‚ã€\nã¤ã„ç›¸æ‰‹ã®æ°—æŒã¡ã‚’å„ªå…ˆã—ãŒã¡ã€‚\nã™ã“ã—ç–²ã‚ŒãŸæ—¥ã¯ã€èª°ã‹ã®ãŸã‚ã ã‘ã˜ã‚ƒãªãã¦ã€è‡ªåˆ†ã®ãŸã‚ã«ã‚‚\nã€å„ªã—ãã—ã¦ã‚ã’ã‚‹æ™‚é–“ã€\nã‚’ã¤ãã£ã¦ã‚ã’ã¦ã­ã€‚',
                traits: 'æ„›å¬Œï¼è¦ªã—ã¿ã‚„ã™ã„ï¼æœ—ã‚‰ã‹', 
                img: 'lillilu.png'
            },
            rosie: {
                id: 'rosie', nameEn: 'Rosie', nameJp: 'ãƒ­ãƒ¼ã‚¸ãƒ¼', 
                color: '#FFCCE0', darkColor: '#FF85A2', // ãƒ”ãƒ³ã‚¯ç³»
                title: 'ğŸ° æ˜¥ã®ãã‚ˆé¢¨ã‚¿ã‚¤ãƒ—', 
                hiddenCharm: 'å¤©çœŸçˆ›æ¼«ãªãƒãƒƒãƒ”ãƒ¼ã‚ªãƒ¼ãƒ©',
                desc: 'å–œã³ã‚’ã‚·ã‚§ã‚¢ã™ã‚‹å¤©æ‰ï¼\nç´ æ•µãªã‚‚ã®ã‚’è¦‹ã¤ã‘ãŸã‚‰ä¸€ç•ªã«èª°ã‹ã«ä¼ãˆã‚‹ãã®ç´”ç²‹ã•ãŒã€ã¿ã‚“ãªã®æ—¥å¸¸ã‚’ã‚«ãƒ©ãƒ•ãƒ«ã«ã—ã¦ã„ã‚‹ã‚ˆã€‚',
                advice: 'å­£ç¯€ã®å¤‰åŒ–ã‚„ã€èº«è¿‘ãªâ€œã¨ãã‚ãâ€ã‚’è¦‹ã¤ã‘ã‚‹ã®ãŒä¸Šæ‰‹ãªã‚ãªãŸã€‚\nç›¸æ‰‹ã®å¥½ããªã‚‚ã®ã‚’è¦‹ã¤ã‘ã¦ã€ã‚·ã‚§ã‚¢ã—ã¦ã‚ã’ã‚‹ã®ã‚‚ä¸Šæ‰‹ã€‚\nç›¸æ‰‹ã«ãŠã™ãã‚ã‘ã™ã‚‹ã ã‘ã˜ã‚ƒãªãã£ã¦ã€\næ™‚ã«ã¯è‡ªåˆ†ã®ã†ã‚Œã—ã‹ã£ãŸã“ã¨ã€\nã¡ã‚‡ã£ã´ã‚Šã•ã¿ã—ã‹ã£ãŸã“ã¨ã€\nä¿¡é ¼ã§ãã‚‹äººã«ã‚·ã‚§ã‚¢ã—ã¦ã¿ã¦ã­ã€‚',
                traits: 'æ„Ÿæ€§è±Šã‹ï¼å¤©çœŸçˆ›æ¼«ï¼å¤©ç„¶', 
                img: 'rosie.png'
            },
            finn: {
                id: 'finn', nameEn: 'Finn', nameJp: 'ãƒ•ã‚£ãƒ³', 
                color: '#B3E6B3', darkColor: '#6BCB77', // ç·‘ç³»
                title: 'ğŸ¸ å¤ã®æ³¢ã—ã¶ãã‚¿ã‚¤ãƒ—', 
                hiddenCharm: 'ã¯ã˜ã‘ã‚‹ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã•',
                desc: 'ã‚ãªãŸã¯å¿ƒã®å£ã‚’å–ã‚Šæ‰•ã†å¤©æ‰ï¼\nã€ã‚ˆã†ã“ãï¼ã€ã¨ã„ã†ã‚ãªãŸã®æ˜ã‚‹ã„ä¸€è¨€ãŒã€ã¿ã‚“ãªã®å¿ƒã®ãƒ‰ã‚¢ã‚’é–‹ã‘ã¦ã„ã‚‹ã‚ˆã€‚',
                advice: 'æœ¬å½“ã¯ã¡ã‚‡ã£ã´ã‚Šãƒ‰ã‚­ãƒ‰ã‚­ã—ã¡ã‚ƒã†ã¨ãã‚‚ã‚ã‚‹ã‘ã©ã€ã„ã–ã¨ã„ã†ã¨ãã¯ç¬‘é¡”ã§å ´ã‚’ã¤ãªã’ã‚‹ãƒ•ã‚£ãƒ³æ°—è³ªã®ã‚ãªãŸã€‚\nã†ã¾ãè©±ãã†ã¨ã—ãªãã¦ã‚‚ã€ç„¡ç†ã—ãªãã¦ã‚‚å¤§ä¸ˆå¤«ã€‚\nã€Œèã„ã¦ã¿ãŸã„ã€ã¨æ€ã£ãŸã“ã¨ã‚’\nç´ ç›´ã«ãã„ã¦ã¿ã‚‹ã ã‘ã§ã€ååˆ†ã«ã‚¹ãƒ†ã‚­ãª\nã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãªã£ã¦ã„ã‚‹ã‚ˆã€‚',
                traits: 'ãƒ ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼ï¼å¥½å¥‡å¿ƒï¼å†’é™ºå®¶', 
                img: 'finn.png'
            },
            bonbon: {
                id: 'bonbon', nameEn: 'Bonbon', nameJp: 'ãƒœãƒ³ãƒœãƒ³', 
                color: '#FFD9B3', darkColor: '#FF9F43', // ã‚ªãƒ¬ãƒ³ã‚¸ç³»
                title: 'ğŸ» ç§‹ã®å¤•ç„¼ã‘ã‚¿ã‚¤ãƒ—', 
                hiddenCharm: 'ã²ãŸã‚€ãã•ã¨å‰å‘ãã•', hiddenCharmAlt: 'ã²ãŸã‚€ãã•ã¨å‰å‘ãã•',
                desc: 'ã‚ãªãŸã¯è¨€è‘‰ã‚ˆã‚Šè¡Œå‹•ã§ç¤ºã™äººã€‚\nã‚³ãƒ„ã‚³ãƒ„é ‘å¼µã‚‹ãã®èƒŒä¸­ã«ã€ã¿ã‚“ãªã¯\nã€è‡ªåˆ†ã‚‚é ‘å¼µã‚ã†ï¼ã€ã¨å‹‡æ°—ã‚’\nã‚‚ã‚‰ã£ã¦ã„ã‚‹ã‚ˆã€‚',
                advice: 'è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§ã€ç›®ã®å‰ã®ã“ã¨ã«ä¸€ç”Ÿæ‡¸å‘½ã«ãªã‚Œã‚‹ã‚¿ã‚¤ãƒ—ã®ã‚ãªãŸã€‚\nçµæœã‚ˆã‚Šã‚‚ãƒ—ãƒ­ã‚»ã‚¹ã‚’å¤§äº‹ã«ã§ãã‚‹ã®ã¯ã¨ã£ã¦ã‚‚è‰¯ã„ã¨ã“ã‚ã€‚\nã ã‘ã©ã€æ™‚ã«é ‘å¼µã‚Šã™ãã¦ã€ã€å¯ã¦ãªã„ï¼ã€ã£ã¦ã“ã¨ã‚ã‚‹ã‚“ã˜ã‚ƒãªã„ï¼Ÿ\nã¨ãã©ãç«‹ã¡æ­¢ã¾ã£ã¦ã€\nã€ã“ã“ã¾ã§æ¥ãŸè‡ªåˆ†ã€ã‚ˆãã‚„ã£ã¦ã‚‹ï¼ã€ã£ã¦ã€è‡ªåˆ†ã«ã”è¤’ç¾ã‚’ã‚ã’ã¦ã­ã€‚',
                traits: 'åŠªåŠ›å®¶ï¼èª å®Ÿï¼ãƒã‚¤ãƒšãƒ¼ã‚¹', 
                img: 'bonbon.png'
            },
            espie: {
                id: 'espie', nameEn: 'Espie', nameJp: 'ã‚¨ã‚¹ãƒ”ãƒ¼', 
                color: '#B3D9FF', darkColor: '#4D96FF', // é’ç³»
                title: 'ğŸ˜ å†¬ã®æ¯›å¸ƒã‚¿ã‚¤ãƒ—', 
                hiddenCharm: 'æ·±ãã¦æ¸©ã‹ã„åŒ…å®¹åŠ›',
                desc: 'è¨€è‘‰ã«ãªã‚‰ãªã„å£°ã‚’èãå„ªã—ã•ã®æŒã¡ä¸»ã€‚\nã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚ˆã‚Šã€ãŸã é™ã‹ã«å¯„ã‚Šæ·»ã£ã¦ãã‚Œã‚‹ãã®æ¸©ã‚‚ã‚Šã«ã€å¤šãã®äººãŒ\næ•‘ã‚ã‚Œã¦ã„ã‚‹ã‚ˆã€‚',
                advice: 'ã‚ãªãŸã¯ã€å›°ã£ã¦ã„ã‚‹äººã‚„ä¸å®‰ãã†ãªäººã‚’\nè¦‹ã¤ã‘ã‚‹ã¨ã€ãã£ã¨å¯„ã‚Šæ·»ã„ãŸããªã‚‹\nã‚¨ã‚¹ãƒ”ãƒ¼æ°—è³ªã€‚\næ”¯ãˆã‚‹å´ã«å›ã‚‹ã“ã¨ãŒå¤šã„ã‹ã‚‰ã“ãã€\nè‡ªåˆ†ã®ä¸å®‰ã‚„ç–²ã‚Œã‚’å¾Œå›ã—ã«ã—ã¦ã—ã¾ã†ä¸€é¢ã‚‚ã€‚\nä¼‘ã¿ã®æ—¥ã¯ã€æ¯›å¸ƒã‚’ã‹ã¶ã£ã¦ã€\nã‚†ã£ãã‚Šä¼‘ã‚“ã§ã­ã€‚',
                traits: 'åŒ…å®¹åŠ›ï¼å…±æ„ŸåŠ›ï¼ã‚ã£ãŸã‹ã„', img: 'espie.png'
            },
            gigi: {
                id: 'gigi', nameEn: 'Gigi', nameJp: 'ã‚¸ã‚¸', 
                color: '#FFF9B3', darkColor: '#E1B12C', // é»„è‰²ç³» (è¦–èªæ€§ã®ãŸã‚æ¿ƒã)
                title: 'ğŸ¦’ å¤œæ˜ã‘ã®æœæ—¥ã‚¿ã‚¤ãƒ—', 
                hiddenCharm: 'ãŠã ã‚„ã‹ãªè¦‹å®ˆã‚ŠåŠ›',
                desc: 'ä¸€æ­©å¼•ã„ã¦å…¨ä½“ã‚’è¦‹ã‚‹\nå®‰å¿ƒæ„Ÿã®æŒã¡ä¸»ã€‚\nã¿ã‚“ãªãŒæ°—ã¥ã‹ãªã„å°ã•ãªå¤‰åŒ–ã«ã‚‚æ°—ã¥ãã€è³¢ã•ã¨å„ªã—ã•ã€ã«æ”¯ãˆã‚‰ã‚Œã¦ã„ã‚‹äººãŒã„ã‚‹ã‚ˆã€‚',
                advice: 'ã‚ãªãŸã¯ã€æ„Ÿæƒ…ã«æµã•ã‚Œéããšã€å°‘ã—\né«˜ã„ã¨ã“ã‚ã‹ã‚‰å…¨ä½“ã‚’è¦‹å®ˆã‚‹ã‚ˆã†ãª\nè¦–ç‚¹ã‚’æŒã£ã¦ã„ã‚‹äººã€‚\nã ã‹ã‚‰ã“ãã€ã€è‡ªåˆ†ã®æ°—æŒã¡ã€ã‚’å¾Œå›ã—ã«\nã—ãŒã¡ãªä¸€é¢ã‚‚ã€‚æ™‚ã€…ã¯ã€è‡ªåˆ†ã®æœ¬éŸ³ã‚’\nåãå‡ºã™æ™‚é–“ã‚’ä½œã£ã¦ã¿ã¦ã­ã€‚\nã‚¸ã‚¸ã¿ãŸã„ã«ã€ã‚¹ãƒˆãƒ¬ã‚¹ç™ºæ•£ã«ã€\nã‚¸ã‚§ãƒƒãƒˆã‚³ãƒ¼ã‚¹ã‚¿ãƒ¼ã«ä¹—ã‚‹ã®ã‚‚ã²ã¨ã¤ã®æ‰‹ã ã‚ˆã€‚',
                traits: 'ä¿¯ç°ï¼å†·é™ã•ï¼è¦‹å®ˆã‚Š', 
                img: 'gigi.png'
            },
            levy: {
                id: 'levy', nameEn: 'Levy', nameJp: 'ãƒ¬ãƒ´ã‚£', 
                color: '#E0B3FF', darkColor: '#9D65C9', // ç´«ç³»
                title: 'ğŸ¦„ å¤œç©ºã®æ˜Ÿã‚¿ã‚¤ãƒ—', 
                hiddenCharm: 'é™ã‹ãªã‚‹ç™’ã‚„ã—ã®å…‰',
                desc: 'æš—é—‡ã§ã“ãè¼ãå¸Œæœ›ã®æ˜Ÿã€‚\nè½ã¡è¾¼ã‚“ã§ã„ã‚‹æ™‚ã«ã‚ãªãŸãŒã‹ã‘ã¦ãã‚Œã‚‹å„ªã—ã„è¨€è‘‰ã¯ã€\nè¿·ã£ã¦ã„ã‚‹äººã®é“ã—ã‚‹ã¹ã«ãªã£ã¦ã„ã‚‹ã‚ˆã€‚',
                advice: 'ã«ãã‚„ã‹ãªå ´ã‚ˆã‚Šã‚‚ã€å°‘äººæ•°ã‚„è½ã¡ç€ã„ãŸ\næ™‚é–“ã®ãªã‹ã§ã€è‡ªåˆ†ã‚‰ã—ã•ãŒå…‰ã‚‹ã‚¿ã‚¤ãƒ—ã€‚\nã˜ã£ãã‚Šè€ƒãˆãŸã‚Šã€ã²ã¨ã‚Šã®ä¸–ç•Œã«ã²ãŸã‚‹æ™‚é–“ã‚‚å¤§åˆ‡ãªæ „é¤Šã€‚\nã€ä»Šæ—¥ã¯ã©ã‚“ãªã„ã„ã“ã¨ã‚ã£ãŸã‹ãªï¼Ÿã€\nã¨ã€å¯ã‚‹å‰ã«ã²ã¨ã¤ã ã‘æ€ã„å‡ºã—ã¦ã¿ã‚‹ã¨ã€\næ˜æ—¥ã«ã¤ãªãŒã‚‹å¿ƒç©ã‚„ã‹ãªæ™‚é–“ã‚’å–ã‚Šæˆ»ã›ã‚‹ã‚ˆ',
                traits: 'ãƒŸã‚¹ãƒ†ãƒªã‚¢ã‚¹ï¼é™ã‹ãªæƒ…ç†±ï¼ç›´æ„Ÿ', 
                img: 'levy.png'
            }
        };

        // è³ªå•ãƒ‡ãƒ¼ã‚¿
        const ALL_QUESTIONS = [
            { id: 1, text: "å¤§åˆ‡ãªäººãŒ\nè½ã¡è¾¼ã‚“ã§ã„ãŸã‚‰ï¼Ÿ", options: [{ text: "ãã£ã¨å¯„ã‚Šæ·»ã£ã¦ã€\nã‚†ã£ãã‚Šè©±ã‚’èã", point: "espie" }, { text: "æ°—åˆ†è»¢æ›ã«èª˜ã£ã¦ã€\nä¸€ç·’ã«æ¥½ã—ã‚€", point: "rosie" }, { text: "ã„ã„ã¨ã“ã‚ã‚’ä¼ãˆã¦ã€åŠ±ã¾ã™", point: "bonbon" }] },
            { id: 2, text: "å¤§åˆ‡ãªäººãŒ\nä¸€ç­‰è³ã«ãªã£ãŸã‚ˆï¼", options: [{ text: "è‡ªåˆ†ã®ã“ã¨ã¿ãŸã„ã«\nå–œã‚“ã˜ã‚ƒã†ï¼", point: "rosie" }, { text: "ã€Œã‚ˆããŒã‚“ã°ã£ãŸã­ã€\nã£ã¦å£°ã‚’ã‹ã‘ã‚‹", point: "espie" }, { text: "æ¬¡ã¯ã©ã‚“ãªç›®æ¨™ã‹æ¥½ã—ã¿ã«ãªã‚‹", point: "levy" }] },
            { id: 3, text: "æ°—æŒã¡ãŒã¡ã‚‡ã£ã¨\nã™ã‚Œé•ã£ã¡ã‚ƒã£ãŸâ€¦", options: [{ text: "ã¾ãšã¯ã€Œã©ã†ã—ãŸã®ï¼Ÿã€\nã£ã¦èã„ã¦ã¿ã‚‹", point: "bonbon" }, { text: "è‡ªåˆ†ã®æ°—æŒã¡ã‚’ã€\nãã£ã¨æ‰“ã¡æ˜ã‘ã‚‹", point: "lillilu" }, { text: "å°‘ã—æ™‚é–“ã‚’ãŠã„ã¦ã€\nç›¸æ‰‹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’å¾…ã¤", point: "gigi" }] },
            { id: 4, text: "è‡ªåˆ†ãŒã—ã‚“ã©ã„ã¨ãã¯ï¼Ÿ", options: [{ text: "èª°ã‹ã¨ç¬‘ã£ã¦ã€\næ°—æŒã¡ã‚’è»½ãã™ã‚‹", point: "rosie" }, { text: "é™ã‹ã«ã²ã¨ã‚Šã§ã€å¿ƒã‚’æ•´ãˆã‚‹", point: "gigi" }, { text: "æ¬¡ã¯ã©ã†ã—ãŸã‚‰ã„ã„ã‹è€ƒãˆã‚‹", point: "bonbon" }] },
            { id: 5, text: "è‡ªåˆ†ã®ãŒã‚“ã°ã‚Šæ–¹ã€‚\nã„ã¡ã°ã‚“è¿‘ã„ã®ã¯ï¼Ÿ", options: [{ text: "ç›®ç«‹ãŸãªãã¦ã‚‚ã„ã„ã€‚\nã‚³ãƒ„ã‚³ãƒ„ç©ã¿é‡ã­ã‚‹", point: "bonbon" }, { text: "ã“ã“ãã®æ™‚ã«é›†ä¸­ã—ã¦ã€\nãã£ã¨åŠ›ã‚’å‡ºã™", point: "levy" }, { text: "ã€Œã‚ã‚ŠãŒã¨ã†ã€ãŒã‚ã‚‹ã¨ã€\nã‚‚ã£ã¨ãŒã‚“ã°ã‚Œã¡ã‚ƒã†", point: "lillilu" }] },
            { id: 6, text: "ãŠã‚„ã™ã¿æ—¥ã®æœã€‚ã©ã†ã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚‹ã®ãŒç†æƒ³çš„ï¼Ÿ", options: [{ text: "ã‚³ãƒ¼ãƒ’ãƒ¼ã‚„ç´…èŒ¶ã§ã€\nãƒ›ãƒƒã¨ä¸€æ¯", point: "levy" }, { text: "æ¯›å¸ƒã«ãã‚‹ã¾ã£ã¦ã€ã¬ãã¬ã", point: "espie" }, { text: "ãŠã§ã‹ã‘ã®æº–å‚™ï¼Letâ€™s goï¼", point: "lillilu" }] },
            { id: 7, text: "æ—…ã«ã§ã‚‹ãªã‚‰ï¼Ÿ", options: [{ text: "ã¾ãšã¯ãƒ«ãƒ¼ãƒˆã‚’è€ƒãˆã¦ã€\nã—ã£ã‹ã‚Šè¨ˆç”»ã¥ãã‚Š", point: "levy" }, { text: "æ€ã„ç«‹ã£ãŸã‚‰ã€\nã™ãé£›ã³å‡ºã™ï¼", point: "finn" }, { text: "æº–å‚™ã—ã¦ã€ä½“èª¿ã‚‚æ•´ãˆã‚‹", point: "espie" }] },
            { id: 8, text: "ã¿ã‚“ãªã§ã„ã‚‹ã¨ãã¯\nã©ã†ã—ã¦ã‚‹ï¼Ÿ", options: [{ text: "ã¿ã‚“ãªãŒè©±ã—ã‚„ã™ã„\né›°å›²æ°—ã¥ãã‚Š", point: "finn" }, { text: "ã‚†ã£ãã‚Š\nã²ã¨ã‚Šã²ã¨ã‚Šã®è©±ã‚’èã", point: "espie" }, { text: "å…¨ä½“ã‚’è¦‹ãªãŒã‚‰ã€\nãã£ã¨ãƒ•ã‚©ãƒ­ãƒ¼ã«ã¾ã‚ã‚‹", point: "gigi" }] },
            { id: 9, text: "è¡—ã§è¿·å­ã‚’è¦‹ã¤ã‘ãŸã‚‰ï¼Ÿ", options: [{ text: "ã€Œå¤§ä¸ˆå¤«ã ã‚ˆã€\nã£ã¦ãã°ã§ä¸€ç·’ã«å¾…ã¤", point: "lillilu" }, { text: "æ‰‹ã‚’ã²ã„ã¦ã€ä¸€ç·’ã«æ¢ã™ï¼", point: "finn" }, { text: "å°‘ã—é›¢ã‚ŒãŸå ´æ‰€ã‹ã‚‰ã€\nãã£ã¨è¦‹å®ˆã‚‹", point: "gigi" }] },
            { id: 10, text: "ã‚µãƒ—ãƒ©ã‚¤ã‚ºã§ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆï¼\nä½•ã‚’ã‚ã’ãŸã„ï¼Ÿ", options: [{ text: "è‡ªåˆ†ãŒã“ã‚Œã ï¼ã¨æ€ã£ãŸã‚‚ã®", point: "finn" }, { text: "æ°—æŒã¡ã‚’ã“ã‚ãŸæ‰‹ä½œã‚Šã®ã‚‚ã®", point: "bonbon" }, { text: "ç›¸æ‰‹ãŒãšã£ã¨\næ¬²ã—ãŒã£ã¦ãŸã‚‚ã®", point: "rosie" }] },
            { id: 11, text: "éŠåœ’åœ°ã«ããŸã‚ˆã€‚\nä½•ãŒå¥½ãï¼Ÿ", options: [{ text: "ã‚¸ã‚§ãƒƒãƒˆã‚³ãƒ¼ã‚¹ã‚¿ãƒ¼ï¼ \nã‚¹ãƒªãƒ«ã‚’æ¥½ã—ã¿ãŸã„", point: "gigi" }, { text: "ãƒ¡ãƒªãƒ¼ã‚´ãƒ¼ãƒ©ãƒ³ãƒ‰â™ª\n ã‚†ã£ãã‚Šç¬‘é¡”ã§ãã‚‹ãã‚‹", point: "rosie" }, { text: "è¦³è¦§è»Šâ­ï¸ãã‚‰ã‚ãæ™¯è‰²ã‚’\nãªãŒã‚ã‚‹æ™‚é–“ãŒå¥½ã", point: "levy" }] },
            { id: 12, text: "ä»Šæ—¥ã¯1æ—¥æ¥½ã—ã‹ã£ãŸï¼\nå¸°ã‚Šé“ã¯ã©ã‚“ãªæ°—åˆ†ï¼Ÿ", options: [{ text: "ã‚‚ã†ã€æ¬¡ã®ãƒ¯ã‚¯ãƒ¯ã‚¯ãŒæ¥½ã—ã¿", point: "finn" }, { text: "å†™çœŸã‚’è¦‹ã¦ã€æ€ã„å‡ºã«ã²ãŸã‚‹", point: "gigi" }, { text: "çµ‚ã‚ã£ã¡ã‚ƒã£ãŸï½\nã¡ã‚‡ã£ã´ã‚Šåˆ‡ãªã„", point: "lillilu" }] }
        ];

        // --- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®šç¾© ---

        // ç”»åƒè¡¨ç¤ºç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (ã‚¨ãƒ©ãƒ¼æ™‚ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼)
        const SmartImage = ({ src, alt, fallbackText, className }) => {
            const [hasError, setHasError] = useState(false);

            // ä¿®æ­£: srcãŒæŒ‡å®šã•ã‚Œã¦ã„ã¦ã‚¨ãƒ©ãƒ¼ãŒãªã„å ´åˆã¯ç”»åƒã‚’è¡¨ç¤º
            // ç”»åƒãŒèª­ã¿è¾¼ã‚ãªã‹ã£ãŸã‚‰ hasError ãŒ true ã«ãªã‚Šãƒ€ãƒŸãƒ¼è¡¨ç¤º
            if (hasError || !src) {
                return (
                    <div className={`${className} flex flex-col items-center justify-center text-center p-4`} style={{ backgroundColor: '#fff5f5', border: '2px dashed #ffb3ba', color: '#ffb3ba' }}>
                        <span className="text-3xl mb-2">ğŸ“·</span>
                        <span className="font-bold text-sm">{fallbackText}</span>
                    </div>
                );
            }

            return (
                <img 
                    src={src} 
                    alt={alt} 
                    className={className} 
                    onError={() => setHasError(true)} 
                />
            );
        };

        const PictureBookWand = () => (
            <svg viewBox="0 0 200 200" className="w-64 h-64 wand-swing" style={{ overflow: 'visible' }}>
                <defs>
                    <filter id="handdrawn" x="-20%" y="-20%" width="140%" height="140%">
                        <feTurbulence type="fractalNoise" baseFrequency="0.04" numOctaves="3" result="noise" />
                        <feDisplacementMap in="SourceGraphic" in2="noise" scale="4" />
                    </filter>
                </defs>
                <g filter="url(#handdrawn)">
                    <path d="M95,90 L90,190 Q95,200 105,190 L105,90 Z" fill="#D4A373" stroke="#8B4513" strokeWidth="2" />
                    <path d="M100,20 L120,70 L170,70 L130,100 L145,150 L100,120 L55,150 L70,100 L30,70 L80,70 Z" fill="#FFD700" stroke="#FFA500" strokeWidth="3" strokeLinejoin="round" />
                    <circle cx="100" cy="90" r="15" fill="#FFFACD" opacity="0.6" />
                    <g className="star-twinkle" style={{ transformOrigin: '50px 50px', animationDelay: '0s' }}>
                        <path d="M50,40 L55,50 L65,50 L57,58 L60,68 L50,60 L40,68 L43,58 L35,50 L45,50 Z" fill="#87CEEB" />
                    </g>
                    <g className="star-twinkle" style={{ transformOrigin: '150px 120px', animationDelay: '0.5s' }}>
                        <circle cx="150" cy="120" r="8" fill="#FFB6C1" />
                    </g>
                    <g className="star-twinkle" style={{ transformOrigin: '160px 40px', animationDelay: '1s' }}>
                        <path d="M160,30 L165,40 L175,40 L167,48 L170,58 L160,50 L150,58 L153,48 L145,40 L155,40 Z" fill="#98FB98" />
                    </g>
                </g>
            </svg>
        );

        // ã‚·ãƒ³ãƒ—ãƒ«ãªSVGãƒ‘ã‚¤ãƒãƒ£ãƒ¼ãƒˆ
        const SimplePieChart = ({ data, activeId, onTouch }) => {
            const total = data.reduce((sum, item) => sum + item.value, 0);
            let cumulativeValue = 0;

            const getCoordinatesForPercent = (percent) => {
                const x = Math.cos(2 * Math.PI * percent);
                const y = Math.sin(2 * Math.PI * percent);
                return [x, y];
            };

            return (
                <div className="relative w-64 h-64 mx-auto">
                    <svg viewBox="-1 -1 2 2" style={{ transform: 'rotate(-90deg)' }} className="w-full h-full overflow-visible">
                        {data.map((slice, index) => {
                            const startPercent = cumulativeValue / total;
                            const value = slice.value;
                            cumulativeValue += value;
                            const endPercent = cumulativeValue / total;

                            if (value === total) {
                                return <circle key={slice.id} cx="0" cy="0" r="1" fill={slice.color} onClick={() => onTouch(slice)} />;
                            }

                            const [startX, startY] = getCoordinatesForPercent(startPercent);
                            const [endX, endY] = getCoordinatesForPercent(endPercent);
                            const largeArcFlag = endPercent - startPercent > 0.5 ? 1 : 0;
                            const pathData = `M 0 0 L ${startX} ${startY} A 1 1 0 ${largeArcFlag} 1 ${endX} ${endY} Z`;
                            const isActive = slice.id === activeId;

                            return (
                                <path
                                    key={slice.id}
                                    d={pathData}
                                    fill={slice.color}
                                    stroke={isActive ? slice.color : 'white'}
                                    strokeWidth={isActive ? '0.1' : '0.02'}
                                    style={{ 
                                        filter: isActive ? 'drop-shadow(0px 0px 4px rgba(0,0,0,0.2))' : '',
                                        transform: isActive ? 'scale(1.05)' : 'scale(1)',
                                        transition: 'transform 0.3s ease',
                                        cursor: 'pointer'
                                    }}
                                    onClick={() => onTouch(slice)}
                                />
                            );
                        })}
                        <circle cx="0" cy="0" r="0.6" fill="white" fillOpacity="0.6" />
                    </svg>
                </div>
            );
        };

        const App = () => {
            const [gameState, setGameState] = useState('start');
            const [questions, setQuestions] = useState([]);
            const [currentQIndex, setCurrentQIndex] = useState(0);
            const [scores, setScores] = useState({});
            const [resultChar, setResultChar] = useState(null);
            const [pieData, setPieData] = useState([]);
            const [touchedPieName, setTouchedPieName] = useState('');

            const shuffleArray = (array) => {
                const newArray = [...array];
                for (let i = newArray.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
                }
                return newArray;
            };

            const getImageUrl = (filename, name, color) => {
                // ç”»åƒãƒ•ã‚¡ã‚¤ãƒ« (lillilu.png ãªã©) ã‚’index.htmlã¨åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã«ç½®ãæƒ³å®š
                return filename; 
            };

            const initGame = () => {
                const shuffled = shuffleArray(ALL_QUESTIONS);
                setQuestions(shuffled.slice(0, 7));
                setScores({ lillilu: 0, rosie: 0, finn: 0, bonbon: 0, espie: 0, gigi: 0, levy: 0 });
                setCurrentQIndex(0);
                setGameState('quiz');
                setResultChar(null);
                setTouchedPieName('');
            };

            const handleAnswer = (pointChar) => {
                const newScores = { ...scores, [pointChar]: scores[pointChar] + 1 };
                setScores(newScores);
                if (currentQIndex < questions.length - 1) {
                    setTimeout(() => setCurrentQIndex(currentQIndex + 1), 250);
                } else {
                    calculateResult(newScores);
                }
            };

            const calculateResult = (finalScores) => {
                setGameState('analyzing');
                setTimeout(() => {
                    let maxScore = -1;
                    let winnerKey = 'lillilu';
                    const keys = shuffleArray(Object.keys(finalScores));
                    keys.forEach(key => {
                        if (finalScores[key] > maxScore) {
                            maxScore = finalScores[key];
                            winnerKey = key;
                        }
                    });
                    setResultChar(CHARACTERS[winnerKey]);
                    
                    const data = Object.keys(CHARACTERS).map(key => ({
                        id: key,
                        name: CHARACTERS[key].nameJp,
                        value: finalScores[key] || 0.1, 
                        color: CHARACTERS[key].color
                    }));
                    setPieData(data);
                    setGameState('result');
                }, 3000);
            };

            const shareResult = (platform) => {
                const text = `ç§ã®ã‚¿ã‚¤ãƒ—ã¯ã€${resultChar.nameJp}ã€‘ã§ã—ãŸï¼\néš ã‚ŒãŸé­…åŠ›ï¼š${resultChar.hiddenCharm}\n\n#ãƒªãƒ«ãƒªãƒ«ã¨ä»²é–“ãŸã¡è¨ºæ–­`;
                const url = window.location.href; 
                let shareUrl = "";
                if (platform === 'line') {
                    shareUrl = `https://line.me/R/msg/text/?${encodeURIComponent(text + "\n" + url)}`;
                } else if (platform === 'threads') {
                    shareUrl = `https://www.threads.net/intent/post?text=${encodeURIComponent(text + "\n" + url)}`;
                } else if (platform === 'instagram') {
                    alert("ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã£ã¦ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã«ã‚·ã‚§ã‚¢ã—ã¦ã­ï¼");
                    return;
                }
                window.open(shareUrl, '_blank');
            };

            const openInstagram = () => {
                window.open("https://www.instagram.com/lillilu_cuddlyclown?igsh=MWsxYjkyYzRkbm00dQ%3D%3D&utm_source=qr/", "_blank");
            };
           
            if (gameState === 'start') {
                return (
                    <div className="flex flex-col items-center justify-center min-h-[90vh] px-6 text-center animate-fade-in">
                        <div className="animate-float mb-8">
                            <div className="text-8xl filter drop-shadow-xl">ğŸˆ</div>
                        </div>
                        <h1 className="text-4xl md:text-5xl font-extrabold text-pastel-pink mb-4 leading-relaxed tracking-wider" style={{ textShadow: '3px 3px 0 #fff' }}>
                            ãƒ”ã‚¨ãƒ­ã®ãƒªãƒ«ãƒªãƒ«ã¨<br/>ä»²é–“ãŸã¡è¨ºæ–­
                        </h1>
                        <div className="bg-white/80 py-2 px-6 rounded-full shadow-sm mb-4 inline-block">
                            <p className="text-deep-brown font-bold text-lg">ã‚ãªãŸã®éš ã‚ŒãŸé­…åŠ›ã¯ãªã‚“ã ï¼ï¼Ÿ</p>
                            <p className="text-deep-brown font-bold text-sm mt-1">ã‚ãªãŸã«ã´ã£ãŸã‚Šã®7ã¤ã®è³ªå•ã§è¨ºæ–­ã™ã‚‹ã‚ˆâ™¡</p>
                        </div>
                        
                        {/* è¡¨ç´™ç”»åƒã‚¨ãƒªã‚¢ (æ­£æ–¹å½¢) */}
                        <div className="w-64 h-64 bg-white/50 rounded-3xl border-4 border-white shadow-lg mb-8 overflow-hidden flex items-center justify-center relative">
                            {/* ãƒ•ã‚¡ã‚¤ãƒ«å cover.png ã‚’æŒ‡å®š */}
                            <SmartImage 
                                src="cover.png" 
                                alt="è¡¨ç´™" 
                                fallbackText="è¡¨ç´™ç”»åƒ (cover.png)"
                                className="w-full h-full object-cover" 
                            />
                        </div>

                        <button onClick={initGame} className="w-full max-w-xs bg-gradient-to-r from-pink-400 to-rose-400 text-white text-2xl font-bold py-5 rounded-full shadow-xl border-4 border-white btn-bounce relative overflow-hidden group">
                            <span className="relative z-10">è¨ºæ–­ã‚¹ã‚¿ãƒ¼ãƒˆï¼</span>
                        </button>

                        <div className="text-center py-4 text-xs text-[#5d4037] opacity-50 font-bold">
                            &copy; 2025 chocofluffy
                        </div>

                        
                    </div>
                );
            }

            if (gameState === 'quiz') {
                const q = questions[currentQIndex];
                return (
                    <div className="flex flex-col min-h-[90vh] px-6 py-8">
                        <div className="w-full max-w-md mx-auto mb-6">
                            <div className="flex justify-between text-lg font-bold text-gray-400 mb-2">
                                <span>Q{currentQIndex + 1}</span>
                                <span>{currentQIndex + 1}/7</span>
                            </div>
                            <div className="h-4 bg-white rounded-full overflow-hidden border border-pink-100">
                                <div className="h-full bg-pink-400 transition-all duration-500 rounded-full" style={{ width: `${((currentQIndex + 1) / 7) * 100}%` }}></div>
                            </div>
                        </div>
                        <div className="flex-grow flex flex-col justify-center max-w-md mx-auto w-full">
                            {/* ç”»åƒæŒ¿å…¥ã‚¹ãƒšãƒ¼ã‚¹ (æ­£æ–¹å½¢) */}
                            <div className="w-full aspect-square bg-white/50 rounded-3xl mb-6 border-4 border-dashed border-pink-200 flex items-center justify-center relative overflow-hidden shadow-inner">
                                <SmartImage 
                                    src={`q${q.id}.png`} 
                                    alt={`q${q.id}.png`} 
                                    fallbackText="Image Area"
                                    className="w-full h-full object-cover" 
                                />
                            </div>
                            
                            {/* ä¿®æ­£ï¼šè³ªå•æ ã‚’è–„ã„ãƒ‘ãƒ¼ãƒ—ãƒ«ã«å¤‰æ›´ã—ã¦åŒºåˆ¥ */}
                            <div className="bg-purple-50 border-4 border-purple-100 rounded-3xl p-6 mb-6 relative shadow-sm">
                                <h2 className="text-2xl md:text-3xl font-bold text-center text-deep-brown leading-relaxed whitespace-pre-wrap">
                                    {q.text}
                                </h2>
                            </div>
                            <div className="space-y-4">
                                {q.options.map((opt, i) => (
                                    <button key={i} onClick={() => handleAnswer(opt.point)} className="w-full bg-white text-deep-brown text-xl font-bold py-5 px-6 rounded-2xl shadow-md border-2 border-transparent hover:border-pink-300 active:bg-pink-50 transition-all btn-bounce whitespace-pre-wrap leading-relaxed">
                                        {opt.text}
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            }

            if (gameState === 'analyzing') {
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen relative overflow-hidden">
                        <div className="relative z-10 text-center flex flex-col items-center">
                            <PictureBookWand />
                            <h2 className="text-3xl font-bold text-deep-brown mt-8 animate-pulse">åˆ†æä¸­...</h2>
                        </div>
                    </div>
                );
            }

            if (gameState === 'result' && resultChar) {
                return (
                    <div className="pb-20 pt-8 px-4 max-w-md mx-auto animate-fade-in">
                        <div className="text-center mb-8">
                            <p className="text-xl font-bold text-gray-500 mb-2">ã‚ãªãŸã®ã‚¿ã‚¤ãƒ—ã¯â€¦</p>
                        </div>
                        <div className="flex justify-center mb-6">
                            <div className="p-3 bg-white rounded-[2.5rem] shadow-xl">
                                <div className="w-64 h-64 md:w-72 md:h-72 rounded-[2rem] overflow-hidden bg-gray-100 border-2 border-gray-100">
                                    <SmartImage 
                                        src={getImageUrl(resultChar.img, resultChar.nameEn, resultChar.color)} 
                                        alt={resultChar.nameEn} 
                                        fallbackText={resultChar.nameEn}
                                        className="w-full h-full object-cover" 
                                    />
                                </div>
                            </div>
                        </div>
                        <div className="text-center mb-10">
                            <div className="mb-4">
                                <h1 className="text-4xl md:text-5xl font-extrabold text-deep-brown mb-1">{resultChar.nameEn}</h1>
                                <h2 className="text-3xl font-bold text-deep-brown">ï¼ˆ{resultChar.nameJp}ï¼‰</h2>
                            </div>
                            <div className="inline-block bg-white/60 px-6 py-3 rounded-2xl shadow-sm border border-pink-100">
                                <p 
                                    className="text-2xl md:text-3xl font-extrabold" 
                                    style={{ color: resultChar.darkColor }}
                                >
                                    {resultChar.title.split(' ')[0]}<br/>{resultChar.title.split(' ').slice(1)}
                                </p>
                            </div>
                        </div>
                        
                        {/* éš ã‚ŒãŸé­…åŠ› & èª¬æ˜ */}
                        <div className="glass-card p-6 mb-8 text-center border-pink-100">
                            <h3 className="text-lg font-bold text-deep-brown mb-2 bg-pink-100 inline-block px-3 py-1 rounded-full">ã€éš ã‚ŒãŸé­…åŠ›ã€‘</h3>
                            <p className="text-xl font-bold text-pink-500 mb-4">{resultChar.hiddenCharm}</p>
                            <p className="text-lg leading-8 font-bold text-deep-brown whitespace-pre-wrap">{resultChar.desc}</p>
                        </div>

                        {/* ã‚¢ãƒ‰ãƒã‚¤ã‚¹ (ä½™ç™½èª¿æ•´æ¸ˆã¿) */}
                        <div className="bg-white rounded-3xl p-6 shadow-lg border-2 border-dashed border-gray-300 mb-8 relative text-center mt-8">
                            <div className="absolute -top-5 left-1/2 transform -translate-x-1/2 bg-yellow-100 px-6 py-2 rounded-full border border-yellow-200 shadow-sm">
                                <span className="font-bold text-yellow-600 text-lg">ã€ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã€‘</span>
                            </div>
                            <p className="text-md leading-7 font-bold text-gray-600 mt-6 whitespace-pre-wrap">{resultChar.advice}</p>
                        </div>

                        {/* ã‚¹ãƒ†ã‚­ãªã¨ã“ã‚ (ä¸€è¡Œ) */}
                        <div className="text-center mb-10">
                            <h3 className="text-lg font-bold text-gray-400 mb-4">ã€ã‚¹ãƒ†ã‚­ãªã¨ã“ã‚ã€‘</h3>
                            <div className="bg-white px-5 py-4 rounded-2xl text-pink-500 font-bold shadow-md border border-pink-50 text-lg inline-block w-full">
                                ãƒ»{resultChar.traits.replace(/ï¼/g, 'ãƒ»')}
                            </div>
                        </div>

                        {/* å††ã‚°ãƒ©ãƒ• */}
                        <div className="glass-card p-6 mb-12">
                            <SimplePieChart 
                                data={pieData} 
                                activeId={resultChar.id} 
                                onTouch={(d) => setTouchedPieName(`${d.name}: ${Math.round((d.value/7)*100)}%`)} 
                            />
                            <div className="text-center mt-2 pointer-events-none">
                                <span className="text-sm font-bold bg-white/80 px-2 py-1 rounded text-deep-brown mb-1">
                                    {touchedPieName || resultChar.nameJp}
                                </span>
                            </div>
                            <div className="grid grid-cols-2 gap-2 mt-4 text-xs">
                                {Object.values(CHARACTERS).map(c => (
                                    <div key={c.id} className="flex items-center gap-2 bg-white/50 p-1 rounded-lg">
                                        <div className="w-3 h-3 rounded-full" style={{background: c.color}}></div>
                                        <span className={c.id === resultChar.id ? "font-bold text-deep-brown" : "text-gray-500"}>
                                            {c.nameJp}
                                        </span>
                                    </div>
                                ))}
                            </div>
                        </div>
                        
                        {/* å…¨ã‚¿ã‚¤ãƒ—å›³é‘‘ (2è¡Œè¡¨ç¤ºãƒ»ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºèª¿æ•´ãƒ»ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼) */}
                        <div className="mb-10 text-[0.8em]">
                            <div className="space-y-4">
                                {Object.values(CHARACTERS).map((char) => {
                                    // è¦–èªæ€§ã®è‰¯ã„æ¿ƒã„è‰²ã‚’å®šç¾©
                                    const darkColor = char.darkColor;
                                    
                                    return (
                                        <div 
                                            key={char.id} 
                                            className="rounded-2xl p-4 shadow-sm flex flex-col gap-1 bg-white/90 relative overflow-hidden transition-transform"
                                            style={{ 
                                                border: char.id === resultChar.id ? `4px solid ${char.color}` : '1px solid #eee',
                                                transform: char.id === resultChar.id ? 'scale(1.02)' : 'scale(1)',
                                                boxShadow: char.id === resultChar.id ? '0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)' : ''
                                            }}
                                        >
                                            {char.id === resultChar.id && (
                                                <div className="absolute top-0 left-0 bg-yellow-400 text-white text-xs font-bold px-3 py-1 rounded-br-lg z-10">
                                                    YOUR TYPE
                                                </div>
                                            )}
                                            <div className="absolute top-0 right-0 w-20 h-20 opacity-20 rounded-bl-full" style={{backgroundColor: char.color}}></div>
                                            
                                            <div className="flex items-center gap-2 mb-1 relative z-0">
                                                <span className="text-3xl">{char.title.split(' ')[0]}</span>
                                                <div className="font-bold text-lg text-deep-brown flex-1">
                                                    {char.nameEn} <span className="text-sm font-normal">({char.nameJp})</span>
                                                </div>
                                            </div>
                                            <div className="pl-1 mt-1 relative z-0">
                                                <div className="font-bold text-gray-700 text-sm">
                                                    {char.title.split(' ').slice(1)}
                                                </div>
                                                <div className="font-bold text-xs mt-1" style={{ color: darkColor }}>
                                                    ã€éš ã‚ŒãŸé­…åŠ›ï¼š{char.hiddenCharmAlt || char.hiddenCharm}ã€‘
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>

                        <div className="space-y-4">
                        <div className="mb-10">
                            <button 
                                onClick={openInstagram}
                                className="w-full bg-gradient-to-r from-purple-500 via-pink-500 to-orange-400 text-white text-xl font-bold py-4 rounded-2xl shadow-lg border-4 border-white btn-bounce flex items-center justify-center gap-3"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                    <rect width="20" height="20" x="2" y="2" rx="5" ry="5"/>
                                    <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
                                    <line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/>
                                </svg>
                                Instagramã‚’è¦‹ã‚‹
                            </button>
                        </div>
                        {/* â–²â–²â–² ã“ã“ã¾ã§ã‚³ãƒ”ãƒ¼ â–²â–²â–² */}
                            <button onClick={initGame} className="w-full bg-white text-gray-500 py-4 rounded-2xl font-bold flex items-center justify-center gap-2 border-2 border-gray-200 shadow-md hover:bg-gray-50 transition btn-bounce">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>
                                ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹
                            </button>
                            {/* â–¼â–¼â–¼ ã“ã“ã‹ã‚‰è¿½åŠ  â–¼â–¼â–¼ */}
                            <p className="text-center text-pink-500 font-bold my-3">
                                ï¼¼çµæœã‚’ã‚·ã‚§ã‚¢ã—ã¦ã¿ã¦ã­â™¡ï¼
                            </p>
                            {/* â–²â–²â–² ã“ã“ã¾ã§è¿½åŠ  â–²â–²â–² */}
                            <div className="grid grid-cols-3 gap-2">
                                <button onClick={() => shareResult('line')} className="bg-[#06C755] text-white py-3 rounded-xl font-bold flex items-center justify-center shadow-lg btn-bounce text-sm">LINE</button>
                                <button onClick={() => shareResult('threads')} className="bg-black text-white py-3 rounded-xl font-bold flex items-center justify-center shadow-lg btn-bounce text-sm">Threads</button>
                                <button onClick={() => shareResult('instagram')} className="bg-gradient-to-tr from-yellow-400 via-pink-500 to-purple-600 text-white py-3 rounded-xl font-bold flex items-center justify-center shadow-lg btn-bounce text-sm">Instagram</button>
                            </div>
                        </div>

                        <div className="text-center py-4 text-xs text-[#5d4037] opacity-50 font-bold">
   ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ &copy; 2025 chocofluffy
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</div>
                        
                    </div>
                );
            }
            return null;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
